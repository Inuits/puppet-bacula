### File managed with puppet ###
### Served by:        '<%= scope.lookupvar('::servername') %>'
### Module:           '<%= scope.to_hash['module_name'] %>'
### Template source:  '<%= template_source %>'

Job {
	Name = "<%= name %>"
  Client = <%= hostname %>-fd
	JobDefs = "<%= jobdefs %>"
	Write Bootstrap = "<%= scope.lookupvar('bacula::working_dir') %>/Client1.bsr"
<% if fileset -%>
	Fileset = <%= fileset %>
<% end -%>
	Storage = <%= storage %>
	Full Backup Pool = <%= full_pool %>
	Incremental Backup Pool = <%= incremental_pool %>
<% if bschedule -%>
	Schedule = <%= bschedule %>
<% end -%>
<% if client_run_before_job -%>
    Client Run Before Job = "<%= client_run_before_job %>"
<% end -%>
<% if client_run_after_job -%>
    Client Run After Job = "<%= client_run_after_job %>"
<% end -%>
<% if server_run_before_job -%>
    Run Before Job = "<%= server_run_before_job %>"
<% end -%>
<% if server_run_after_job -%>
    Run After Job = "<%= server_run_after_job %>"
<% end -%>
}

Job {
	Name = "<%= name %>-res"
	Client = <%= hostname %>-fd
	Type = Restore
	FileSet = "FullSet"
	Storage = <%= storage %>
	Pool = <%= full_pool %>
	Messages = Standard
	Where = /tmp/bacula-restores
}
