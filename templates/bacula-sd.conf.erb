#
# Managed by puppet
#

#
# Storage Daemon configuration
#

Storage {
  Name = <%= scope.lookupvar('bacula::storage_label') %>
  SDPort = 9103                                                             # Director's port
  WorkingDirectory = "/var/spool/bacula"
  Pid Directory = "/var/run"
  Maximum Concurrent Jobs = 20
}

#
# List Directors who are permitted to contact Storage Daemon
#

Director {
  Name = <%= scope.lookupvar('bacula::director_label') %>
  Password = "<%= scope.lookupvar('bacula::director_password') %>"
}

# 
# Send all messages to the Director, 
# mount messages also are sent to the email address
#

Messages {
  Name = Standard
  director = <%= scope.lookupvar('bacula::director_label') %> = all
}

@|"sh -c 'for f in /etc/bacula/devices.d/*.conf; do echo @${f}; done'"
