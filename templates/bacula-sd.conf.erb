### File managed with puppet ###
### Served by:        '<%= scope.lookupvar('::servername') %>'
### Module:           '<%= scope.to_hash['module_name'] %>'
### Template source:  '<%= template_source %>'

#
# Storage Daemon configuration
#

Storage {
  name                    = "<%= sd_label %>"
  sdport                  = "<%= sd_port %>"
  workingdirectory        = "<%= working_dir %>"
  pid directory           = "<%= pid_dir %>"
  maximum concurrent jobs = "<%= max_concurrent_jobs %>"
}

#
# List directors that are permitted to contact this Storage Daemon
#

Director {
  name                    = "<%= director_label %>"
  password                = "<%= director_password %>"
}

#
# Logging
#

Messages {
  name                    = "bacula-sd on ${::fqdn}"
  append                  = "<%= log_dir %>/bacula-sd.log"
  director                = "<%= director_label %> = all"
}

#
# Load files in <%= config_dir %>/devices.d
#
@|"sh -c 'for f in <%= config_dir %>/devices.d/*.conf; do echo @${f}; done'"
