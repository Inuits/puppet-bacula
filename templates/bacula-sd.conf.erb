### File managed with puppet ###
### Served by:        '<%= scope.lookupvar('::servername') %>'
### Module:           '<%= scope.to_hash['module_name'] %>'
### Template source:  '<%= template_source %>'

#
# Storage Daemon configuration
#

Storage {
  Name = <% if has_variable?('storage_label') -%>
<%= scope.lookupvar('storage_label') %>
<% else -%>
<%= scope.lookupvar('bacula::default_storage_label') %>
<% end -%>
  SDPort = 9103                                                             # Director's port
  WorkingDirectory = "<%= scope.lookupvar('bacula::working_dir') %>"
  Pid Directory = "/var/run"
  Maximum Concurrent Jobs = 20
}

#
# List Directors who are permitted to contact Storage Daemon
#

Director {
  Name = <%= scope.lookupvar('bacula::director_label') %>
  Password = "<%= scope.lookupvar('bacula::director_password') %>"
}

#
# Send all messages to the Director,
# mount messages also are sent to the email address
#

Messages {
  Name = Standard
  director = <%= scope.lookupvar('bacula::director_label') %> = all
}

@|"sh -c 'for f in /etc/bacula/devices.d/*.conf; do echo @${f}; done'"
